@page
@using Extensions
@model IndexModel
@{
	ViewData["Title"] = "Home page";
}

<div class="text-center">
	<h1 class="header-title">Sara Gustafsson</h1> <br />
	<h3 class="header-text">När ingen ser mig då hittar jag mig</h3>
	<hr class="m-5 border" />
</div>


@if (Model.Blogg != null && Model.Blogg.IsArchived == false) // TODO: Denna kod upprepas även i Arkiv.cshtml. Behöver skapa en typ av metod
{

	<div class="card">
		<img class="card-img-top" src="~/img/@Model.Blogg.Image" alt="Blog Image" />
		<div class="card-body">
			<h3 class="card-title">@Model.Blogg.Title</h3>
			<p class="card-text linebreak">@Model.Blogg.Content</p>
			<p class="text-muted">
				<strong>Författare:</strong> @Model.Blogg.Author<br>
				<strong>Publicerad:</strong> @Model.Blogg.LaunchDate.ToString("yyyy-MM-dd")
			</p>
		</div>
		<button class="btn btn-outline-dark" onclick="showAll()">Tillbaka</button>
	</div>

}
else
{
	@foreach (var blogg in Model.Bloggs.Where(b => b.IsArchived == false && b.LaunchDate <= DateTime.Today))
	{
		<a asp-route-showId="@blogg.Id" class="text-decoration-none text-dark">
			<div class="card">
				<img class="card-img-top" src="~/img/@blogg.Image" alt="Blog Image" />
				<div class="card-body">
					<h5 class="card-title">@blogg.Title</h5>
					<p class="card-text">@blogg.Content.LimitLength(120)</p>
					<p class="card-text"><small class="text-muted">Publicerad: @blogg.LaunchDate.ToString("yyyy-MM-dd")</small></p>
				</div>
			</div>
		</a>
		<hr class="m-5 border" />
	}
}

<script>
	function showAll() {
		window.location.href = '/';
	}
</script>
