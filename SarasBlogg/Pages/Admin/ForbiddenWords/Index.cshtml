@page
@model SarasBlogg.Pages.Admin.ForbiddenWords.IndexModel
@{
	ViewData["Title"] = "Förbjudna ord";
}
<div class="container-site">
	@if (User.IsInRole("superuser") || User.IsInRole("admin") || User.IsInRole("superadmin"))
	{
		<partial name="/Pages/Admin/_AdminNav.cshtml" />

		<h2>Förbjudna ord</h2>

		<form method="post" asp-page-handler="Add">
			<div class="mb-3">
				<label for="NewWord" class="form-label">Nytt ord</label>
				<input type="text" asp-for="NewWord" class="form-control" placeholder="Exempel: horunge" />
			</div>
			<button type="submit" class="btn btn-primary">Lägg till ord</button>
		</form>

		<hr />
		@if (Model.ForbiddenWords.Any())
		{
			<table class="table table-striped mt-3">
				<thead>
					<tr>
						<th>Ord (Regex-pattern)</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					@foreach (var word in Model.ForbiddenWords)
					{
						<tr>
							<td>@word.WordPattern</td>
							<td>
								<form method="post" asp-page-handler="Delete">
									<input type="hidden" name="id" value="@word.Id" />
									<button type="submit" class="btn btn-danger btn-sm">Ta bort</button>
								</form>
							</td>
						</tr>
					}
				</tbody>
			</table>
		}
		else
		{
			<p class="text-muted mt-3">Inga förbjudna ord hittades.</p>
		}
	}
</div>